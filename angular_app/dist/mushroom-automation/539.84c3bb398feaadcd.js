"use strict";(self.webpackChunkmushroom_automation=self.webpackChunkmushroom_automation||[]).push([[539],{2539:(G,m,l)=>{l.r(m),l.d(m,{DATABASE_ROUTES:()=>V});var g=l(7060),h=l(177),e=l(540);let b=(()=>{class o{constructor(){}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"container","mx-auto","px-4","py-6"]],template:function(s,r){1&s&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[h.MD,g.iI,g.n3],encapsulation:2})}}return o})();var d=l(9417),k=l(1626),u=l(8810),p=l(9437),f=l(6354),v=l(5312);let _=(()=>{class o{constructor(t){this.http=t,this.baseUrl=`${v.c.apiUrl}/api`}getBackups(t){if(!t)return this.http.get(`${this.baseUrl}/msad/backups`).pipe((0,p.W)(r=>(console.error("Error al obtener backups:",r),(0,u.$)(()=>r))));let s=(new k.Nl).set("type",t);return this.http.get(`${this.baseUrl}/msad/backups`,{params:s}).pipe((0,f.T)(r=>{if(r.success&&r.backups){const a=t.toLowerCase();if(r.backups.length>0&&r.backups.some(i=>i.type&&i.type.toLowerCase()!==a)){const i=r.backups.filter(c=>c.type&&c.type.toLowerCase()===a);return console.log("Filtrando manualmente por tipo:",a),console.log("Backups originales:",r.backups.length),console.log("Backups filtrados:",i.length),{...r,backups:i}}}return r}),(0,p.W)(r=>(console.error("Error al obtener backups:",r),(0,u.$)(()=>r))))}createBackup(){return this.http.post(`${this.baseUrl}/msad/backups/create`,{}).pipe((0,p.W)(t=>(console.error("Error al crear backup:",t),(0,u.$)(()=>t))))}deleteBackup(t){return this.http.delete(`${this.baseUrl}/msad/backups/${t}`).pipe((0,p.W)(s=>(console.error("Error al eliminar backup:",s),(0,u.$)(()=>s))))}restoreBackup(t){return this.http.post(`${this.baseUrl}/msad/backups/restore/${t}`,{}).pipe((0,p.W)(s=>(console.error("Error al restaurar backup:",s),(0,u.$)(()=>s))))}getBackupDownloadUrl(t){return`${this.baseUrl}/msad/backups/download/${t}`}getSchedulerStatus(){return this.http.get(`${this.baseUrl}/msad/backups/scheduler`).pipe((0,p.W)(t=>(console.error("Error al obtener estado del programador:",t),(0,u.$)(()=>t))))}configureScheduler(t){return this.http.post(`${this.baseUrl}/msad/backups/scheduler`,t).pipe((0,p.W)(s=>(console.error("Error al configurar programador:",s),(0,u.$)(()=>s))))}formatFileSize(t){if(0===t)return"0 Bytes";const a=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]}formatDate(t){return new Date(t).toLocaleString()}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(k.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function x(o,n){if(1&o&&(e.qSk(),e.joV(),e.j41(0,"div",25)(1,"div",26)(2,"div",27),e.qSk(),e.j41(3,"svg",28),e.nrm(4,"path",29),e.k0s()(),e.joV(),e.j41(5,"div",30)(6,"p"),e.EFF(7),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(7),e.JRh(t.error)}}function w(o,n){if(1&o&&(e.qSk(),e.joV(),e.j41(0,"div",31)(1,"div",26)(2,"div",27),e.qSk(),e.j41(3,"svg",32),e.nrm(4,"path",33),e.k0s()(),e.joV(),e.j41(5,"div",30)(6,"p"),e.EFF(7),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(7),e.JRh(t.successMessage)}}function j(o,n){1&o&&(e.j41(0,"div",34),e.nrm(1,"div",35),e.k0s())}function B(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",36),e.qSk(),e.j41(1,"svg",37),e.nrm(2,"path",38),e.k0s(),e.joV(),e.j41(3,"p",39),e.EFF(4,"No se encontraron backups"),e.k0s(),e.j41(5,"button",40),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.createBackup())}),e.EFF(6," Crear primer backup "),e.k0s()()}}function F(o,n){1&o&&e.nrm(0,"span",63)}function y(o,n){1&o&&e.nrm(0,"span",64)}function E(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46),e.DNE(3,F,1,0,"span",47),e.DNE(4,y,1,0,"span",48),e.k0s(),e.j41(5,"h3",49),e.EFF(6),e.k0s(),e.j41(7,"div",50),e.qSk(),e.j41(8,"svg",51),e.nrm(9,"path",52),e.k0s(),e.joV(),e.j41(10,"span"),e.EFF(11),e.k0s()(),e.j41(12,"div",53),e.qSk(),e.j41(13,"svg",51),e.nrm(14,"path",54),e.k0s(),e.joV(),e.j41(15,"span"),e.EFF(16),e.k0s()()(),e.j41(17,"div",55)(18,"button",56),e.bIt("click",function(r){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.downloadBackup(i,r))}),e.qSk(),e.j41(19,"svg",57),e.nrm(20,"path",58),e.k0s()(),e.joV(),e.j41(21,"button",59),e.bIt("click",function(r){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.openRestoreModal(i,r))}),e.qSk(),e.j41(22,"svg",57),e.nrm(23,"path",60),e.k0s()(),e.joV(),e.j41(24,"button",61),e.bIt("click",function(r){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.openDeleteModal(i,r))}),e.qSk(),e.j41(25,"svg",57),e.nrm(26,"path",62),e.k0s()()()()}if(2&o){const t=n.$implicit,s=e.XpG(2);e.R7$(3),e.Y8G("ngIf",t.type&&"manual"===t.type.toLowerCase()),e.R7$(1),e.Y8G("ngIf",t.type&&"scheduled"===t.type.toLowerCase()),e.R7$(1),e.FS9("title",t.filename),e.R7$(1),e.JRh(t.filename),e.R7$(5),e.JRh(s.formatDate(t.created_at)),e.R7$(5),e.JRh(s.formatFileSize(t.size))}}function M(o,n){if(1&o&&(e.j41(0,"div",41)(1,"div",42),e.DNE(2,E,27,6,"div",43),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.backups)}}function C(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",65)(1,"div",66)(2,"h3",67),e.EFF(3,"Confirmar eliminaci\xf3n"),e.k0s(),e.j41(4,"p",68),e.EFF(5,"\xbfEst\xe1 seguro que desea eliminar el backup "),e.j41(6,"span",69),e.EFF(7),e.k0s(),e.EFF(8,"?"),e.k0s(),e.j41(9,"div",70)(10,"button",71),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeDeleteModal())}),e.EFF(11," Cancelar "),e.k0s(),e.j41(12,"button",72),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.confirmDeleteBackup())}),e.EFF(13," Eliminar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.JRh(null==t.backupToDelete?null:t.backupToDelete.filename)}}function R(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",65)(1,"div",66)(2,"h3",67),e.EFF(3,"Confirmar restauraci\xf3n"),e.k0s(),e.j41(4,"p",73),e.EFF(5,"\xbfEst\xe1 seguro que desea restaurar la base de datos con el backup "),e.j41(6,"span",69),e.EFF(7),e.k0s(),e.EFF(8,"?"),e.k0s(),e.j41(9,"div",74)(10,"div",26)(11,"div",27),e.qSk(),e.j41(12,"svg",75),e.nrm(13,"path",76),e.k0s()(),e.joV(),e.j41(14,"div",30)(15,"p"),e.EFF(16,"Esta acci\xf3n reemplazar\xe1 todos los datos actuales con los del backup seleccionado. Este proceso no se puede deshacer."),e.k0s()()()(),e.j41(17,"div",70)(18,"button",71),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeRestoreModal())}),e.EFF(19," Cancelar "),e.k0s(),e.j41(20,"button",77),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.confirmRestoreBackup())}),e.EFF(21," Restaurar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.JRh(null==t.backupToRestore?null:t.backupToRestore.filename)}}function T(o,n){if(1&o&&(e.j41(0,"div",93)(1,"span",94),e.EFF(2,"\xdaltimo backup:"),e.k0s(),e.j41(3,"span",95),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(4),e.JRh(t.formatDate(t.schedulerStatus.last_backup))}}function S(o,n){if(1&o&&(e.j41(0,"div",93)(1,"span",94),e.EFF(2,"Pr\xf3ximo backup:"),e.k0s(),e.j41(3,"span",95),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(4),e.JRh(t.formatDate(t.schedulerStatus.next_backup))}}function I(o,n){if(1&o&&(e.j41(0,"div",91),e.DNE(1,T,5,1,"div",92),e.DNE(2,S,5,1,"div",92),e.k0s()),2&o){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.schedulerStatus.last_backup),e.R7$(1),e.Y8G("ngIf",t.schedulerStatus.next_backup)}}const $=function(o){return{"transform translate-x-7":o}};function D(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",65)(1,"div",66)(2,"h3",67),e.EFF(3,"Configurar programador de backups"),e.k0s(),e.j41(4,"div",68)(5,"label",78)(6,"div",79)(7,"input",80),e.bIt("ngModelChange",function(r){e.eBV(t);const a=e.XpG();return e.Njj(a.schedulerEnabled=r)}),e.k0s(),e.nrm(8,"div",81)(9,"div",82),e.k0s(),e.j41(10,"div",83),e.EFF(11),e.k0s()()(),e.j41(12,"div",68)(13,"label",84),e.EFF(14,"Intervalo (horas)"),e.k0s(),e.j41(15,"div",85)(16,"input",86),e.bIt("ngModelChange",function(r){e.eBV(t);const a=e.XpG();return e.Njj(a.schedulerInterval=r)}),e.k0s(),e.j41(17,"span",87),e.EFF(18),e.k0s()(),e.j41(19,"p",88),e.EFF(20),e.k0s()(),e.DNE(21,I,3,2,"div",89),e.j41(22,"div",70)(23,"button",71),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeSchedulerModal())}),e.EFF(24," Cancelar "),e.k0s(),e.j41(25,"button",90),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.saveSchedulerConfig())}),e.EFF(26," Guardar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.Y8G("ngModel",t.schedulerEnabled),e.R7$(2),e.Y8G("ngClass",e.eq3(7,$,t.schedulerEnabled)),e.R7$(2),e.SpI(" ",t.schedulerEnabled?"Activado":"Desactivado"," "),e.R7$(5),e.Y8G("ngModel",t.schedulerInterval),e.R7$(2),e.JRh(t.schedulerInterval),e.R7$(2),e.SpI(" ",t.schedulerInterval<24?"Cada "+t.schedulerInterval+" hora(s)":24==t.schedulerInterval?"Diario":168==t.schedulerInterval?"Semanal":"Cada "+t.calculateDays(t.schedulerInterval)+" d\xeda(s)"," "),e.R7$(1),e.Y8G("ngIf",t.schedulerStatus)}}const V=[{path:"",component:b,children:[{path:"",redirectTo:"backups",pathMatch:"full"},{path:"backups",component:(()=>{class o{constructor(t){this.backupService=t,this.backups=[],this.isLoading=!1,this.error=null,this.successMessage=null,this.selectedType="",this.showDeleteModal=!1,this.backupToDelete=null,this.showRestoreModal=!1,this.backupToRestore=null,this.showSchedulerModal=!1,this.schedulerStatus=null,this.schedulerEnabled=!1,this.schedulerInterval=24}ngOnInit(){this.loadBackups(),this.loadSchedulerStatus()}loadBackups(){this.isLoading=!0,this.error=null,this.backupService.getBackups(this.selectedType).subscribe({next:t=>{this.backups=t.backups||[],console.log("Backups cargados:",this.backups),console.log("Filtro actual:",this.selectedType),this.isLoading=!1},error:t=>{this.error="Error al cargar los backups. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}})}loadSchedulerStatus(){this.backupService.getSchedulerStatus().subscribe({next:t=>{t.success&&t.status&&(this.schedulerStatus=t.status,this.schedulerEnabled=t.status.active,this.schedulerInterval=t.status.interval_hours)},error:t=>{console.error("Error al cargar el estado del programador:",t)}})}createBackup(){this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.createBackup().subscribe({next:t=>{t.success?(this.successMessage="Backup creado correctamente.",this.loadBackups()):(this.error=t.error||"Error desconocido al crear backup.",this.isLoading=!1)},error:t=>{this.error="Error al crear backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}})}downloadBackup(t,s){s.stopPropagation();const r=this.backupService.getBackupDownloadUrl(t.filename),a=document.createElement("a");a.style.display="none",a.href=r,a.download=t.filename,document.body.appendChild(a),a.click(),document.body.removeChild(a)}openDeleteModal(t,s){s.stopPropagation(),this.backupToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.backupToDelete=null}confirmDeleteBackup(){this.backupToDelete&&(this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.deleteBackup(this.backupToDelete.filename).subscribe({next:t=>{t.success?(this.successMessage="Backup eliminado correctamente.",this.loadBackups(),this.closeDeleteModal()):(this.error=t.error||"Error desconocido al eliminar backup.",this.isLoading=!1)},error:t=>{this.error="Error al eliminar backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t),this.closeDeleteModal()}}))}openRestoreModal(t,s){s.stopPropagation(),this.backupToRestore=t,this.showRestoreModal=!0}closeRestoreModal(){this.showRestoreModal=!1,this.backupToRestore=null}confirmRestoreBackup(){this.backupToRestore&&(this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.restoreBackup(this.backupToRestore.filename).subscribe({next:t=>{t.success?(this.successMessage="Base de datos restaurada correctamente.",this.closeRestoreModal(),this.isLoading=!1):(this.error=t.error||"Error desconocido al restaurar backup.",this.isLoading=!1)},error:t=>{this.error="Error al restaurar backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t),this.closeRestoreModal()}}))}openSchedulerModal(){this.loadSchedulerStatus(),this.showSchedulerModal=!0}closeSchedulerModal(){this.showSchedulerModal=!1}saveSchedulerConfig(){this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.configureScheduler({enabled:this.schedulerEnabled,interval_hours:this.schedulerInterval}).subscribe({next:s=>{s.success?(this.successMessage="Programador configurado correctamente.",this.schedulerStatus=s.status||null,this.closeSchedulerModal(),this.isLoading=!1):(this.error=s.error||"Error desconocido al configurar programador.",this.isLoading=!1)},error:s=>{this.error="Error al configurar programador. Por favor intente nuevamente.",this.isLoading=!1,console.error(s)}})}filterByType(t){this.selectedType=t.toLowerCase(),this.loadBackups()}clearFilters(){this.selectedType="",this.loadBackups()}formatFileSize(t){return this.backupService.formatFileSize(t)}formatDate(t){return this.backupService.formatDate(t)}calculateDays(t){return Math.floor(t/24)}isTypeMatch(t){return!this.selectedType||t.type.toLowerCase()===this.selectedType.toLowerCase()}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(_))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-backups"]],standalone:!0,features:[e.aNF],decls:37,vars:21,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3","mt-4","md:mt-0"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","transform","hover:scale-105","flex","items-center","shadow-md",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","transform","hover:scale-105","flex","items-center","shadow-md",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-lg shadow-md animate-fadeIn",4,"ngIf"],["class","bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded-lg shadow-md animate-fadeIn",4,"ngIf"],[1,"bg-white","p-4","rounded-lg","shadow-md","mb-6"],[1,"text-lg","font-semibold","mb-3"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-gray-200","transition-colors","shadow",3,"click"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-blue-200","transition-colors","shadow","flex","items-center",3,"click"],[1,"w-2","h-2","rounded-full","bg-blue-600","mr-2"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-green-200","transition-colors","shadow","flex","items-center",3,"click"],[1,"w-2","h-2","rounded-full","bg-green-600","mr-2"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","py-20 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn",4,"ngIf"],[1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-6","rounded-lg","shadow-md","animate-fadeIn"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"bg-green-100","border-l-4","border-green-500","text-green-700","p-4","mb-6","rounded-lg","shadow-md","animate-fadeIn"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],[1,"py-20","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-16","w-16","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"mt-4","text-gray-600"],[1,"mt-4","px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","transform","hover:scale-105","shadow-md",3,"click"],[1,"p-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white border rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:scale-[1.02]",4,"ngFor","ngForOf"],[1,"bg-white","border","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-all","transform","hover:scale-[1.02]"],[1,"p-4","border-b","relative"],[1,"absolute","top-4","right-4"],["class","inline-block w-3 h-3 rounded-full bg-blue-500","title","Backup Manual",4,"ngIf"],["class","inline-block w-3 h-3 rounded-full bg-green-500","title","Backup Programado",4,"ngIf"],[1,"font-medium","text-gray-800","truncate","pr-8",3,"title"],[1,"mt-2","flex","items-center","text-sm","text-gray-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","items-center","text-sm","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"],[1,"p-4","flex","justify-between","items-center","bg-gray-50"],["title","Descargar backup",1,"text-blue-600","hover:text-blue-800","bg-blue-100","hover:bg-blue-200","p-2","rounded-lg","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],["title","Restaurar backup",1,"text-green-600","hover:text-green-800","bg-green-100","hover:bg-green-200","p-2","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Eliminar backup",1,"text-red-600","hover:text-red-800","bg-red-100","hover:bg-red-200","p-2","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["title","Backup Manual",1,"inline-block","w-3","h-3","rounded-full","bg-blue-500"],["title","Backup Programado",1,"inline-block","w-3","h-3","rounded-full","bg-green-500"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-50","flex","items-center","justify-center","z-50","animate-fadeIn"],[1,"bg-white","rounded-lg","p-6","max-w-md","w-full","shadow-xl","transform","transition-all"],[1,"text-xl","font-bold","mb-4"],[1,"mb-6"],[1,"font-semibold"],[1,"flex","justify-end","space-x-3"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-100","transition-colors",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition-colors",3,"click"],[1,"mb-2"],[1,"bg-yellow-100","border-l-4","border-yellow-500","text-yellow-700","p-4","mb-6"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-yellow-500"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors",3,"click"],[1,"flex","items-center","cursor-pointer"],[1,"relative"],["type","checkbox",1,"sr-only",3,"ngModel","ngModelChange"],[1,"block","bg-gray-300","w-14","h-7","rounded-full"],[1,"dot","absolute","left-1","top-1","bg-white","w-5","h-5","rounded-full","transition-all","duration-300",3,"ngClass"],[1,"ml-3","text-gray-700","font-medium"],[1,"block","text-gray-700","font-medium","mb-2"],[1,"flex","items-center"],["type","range","min","1","max","168","step","1",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer",3,"ngModel","ngModelChange"],[1,"ml-3","text-gray-700","w-8","text-right"],[1,"text-sm","text-gray-500","mt-1"],["class","mb-6 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"mb-6","p-4","bg-gray-50","rounded-lg"],["class","mb-2 flex",4,"ngIf"],[1,"mb-2","flex"],[1,"font-medium","w-40"],[1,"text-gray-700"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Gesti\xf3n de Backups"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Administre copias de seguridad de la base de datos"),e.k0s()(),e.j41(7,"div",4)(8,"button",5),e.bIt("click",function(){return r.createBackup()}),e.qSk(),e.j41(9,"svg",6),e.nrm(10,"path",7),e.k0s(),e.EFF(11," Crear Backup "),e.k0s(),e.joV(),e.j41(12,"button",8),e.bIt("click",function(){return r.openSchedulerModal()}),e.qSk(),e.j41(13,"svg",6),e.nrm(14,"path",9),e.k0s(),e.EFF(15," Programador "),e.k0s()()(),e.DNE(16,x,8,1,"div",10),e.DNE(17,w,8,1,"div",11),e.joV(),e.j41(18,"div",12)(19,"h2",13),e.EFF(20,"Filtros"),e.k0s(),e.j41(21,"div",14)(22,"button",15),e.bIt("click",function(){return r.clearFilters()}),e.EFF(23," Todos "),e.k0s(),e.j41(24,"button",16),e.bIt("click",function(){return r.filterByType("manual")}),e.nrm(25,"span",17),e.EFF(26," Manual "),e.k0s(),e.j41(27,"button",18),e.bIt("click",function(){return r.filterByType("scheduled")}),e.nrm(28,"span",19),e.EFF(29," Programado "),e.k0s()()(),e.j41(30,"div",20),e.DNE(31,j,2,0,"div",21),e.DNE(32,B,7,0,"div",22),e.DNE(33,M,3,1,"div",23),e.k0s(),e.DNE(34,C,14,1,"div",24),e.DNE(35,R,22,1,"div",24),e.DNE(36,D,27,9,"div",24),e.k0s()),2&s&&(e.R7$(8),e.Y8G("disabled",r.isLoading),e.R7$(8),e.Y8G("ngIf",r.error),e.R7$(1),e.Y8G("ngIf",r.successMessage),e.R7$(5),e.AVh("bg-gray-200",""===r.selectedType)("bg-gray-100",""!==r.selectedType),e.R7$(2),e.AVh("bg-blue-200","manual"===r.selectedType)("bg-gray-100","manual"!==r.selectedType),e.R7$(3),e.AVh("bg-green-200","scheduled"===r.selectedType)("bg-gray-100","scheduled"!==r.selectedType),e.R7$(4),e.Y8G("ngIf",r.isLoading),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&0===r.backups.length),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&r.backups.length>0),e.R7$(1),e.Y8G("ngIf",r.showDeleteModal),e.R7$(1),e.Y8G("ngIf",r.showRestoreModal),e.R7$(1),e.Y8G("ngIf",r.showSchedulerModal))},dependencies:[h.MD,h.YU,h.Sq,h.bT,d.YN,d.me,d.MR,d.Zm,d.BC,d.vS,d.X1],styles:["@keyframes _ngcontent-%COMP%_fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  .animate-fadeIn[_ngcontent-%COMP%] {\n    animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in-out;\n  }"]})}}return o})(),title:"Gesti\xf3n de Backups"}]}]}}]);