"use strict";(self.webpackChunkmushroom_automation=self.webpackChunkmushroom_automation||[]).push([[184],{7184:(V,m,d)=>{d.r(m),d.d(m,{ReportsComponent:()=>S});var u=d(177),a=d(9417),e=d(540),f=d(5416),h=d(7060);function v(n,l){if(1&n&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.client_id),e.R7$(1),e.JRh(t.name)}}function x(n,l){if(1&n&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.value),e.R7$(1),e.JRh(t.label)}}function b(n,l){if(1&n&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.value),e.R7$(1),e.JRh(t.label)}}function F(n,l){1&n&&(e.qSk(),e.joV(),e.j41(0,"div",45),e.nrm(1,"div",46),e.j41(2,"span",47),e.EFF(3,"Cargando reportes..."),e.k0s()())}function k(n,l){if(1&n&&(e.qSk(),e.joV(),e.j41(0,"div",48),e.qSk(),e.j41(1,"svg",49),e.nrm(2,"path",50),e.k0s(),e.joV(),e.j41(3,"div")(4,"p",51),e.EFF(5),e.k0s(),e.j41(6,"p",52),e.EFF(7,"Int\xe9ntelo nuevamente o contacte al administrador."),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.error)}}const j=function(){return["sensors","actuators","events"]},y=function(n,l,t,r){return{"bg-green-100 text-green-800":n,"bg-blue-100 text-blue-800":l,"bg-purple-100 text-purple-800":t,"bg-gray-100 text-gray-800":r}},w=function(){return["json","csv"]},R=function(n,l,t){return{"bg-yellow-100 text-yellow-800":n,"bg-pink-100 text-pink-800":l,"bg-gray-100 text-gray-800":t}};function C(n,l){if(1&n){const t=e.RV6();e.j41(0,"tr",63)(1,"td",64),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.EFF(2),e.k0s(),e.j41(3,"td",65),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.EFF(4),e.k0s(),e.j41(5,"td",66),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.j41(6,"span",67),e.EFF(7),e.k0s()(),e.j41(8,"td",66),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.j41(9,"span",67),e.EFF(10),e.nI1(11,"uppercase"),e.k0s()(),e.j41(12,"td",65),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.EFF(13),e.k0s(),e.j41(14,"td",65),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewReportDetails(i))}),e.EFF(15),e.k0s(),e.j41(16,"td",68)(17,"div",69)(18,"button",70),e.bIt("click",function(o){const s=e.eBV(t).$implicit,g=e.XpG(2);return e.Njj(g.downloadReport(s,o))}),e.qSk(),e.j41(19,"svg",71),e.nrm(20,"path",72),e.k0s(),e.EFF(21," Descargar "),e.k0s(),e.joV(),e.j41(22,"button",73),e.bIt("click",function(o){const s=e.eBV(t).$implicit,g=e.XpG(2);return e.Njj(g.deleteReport(s,o))}),e.qSk(),e.j41(23,"svg",71),e.nrm(24,"path",74),e.k0s(),e.EFF(25," Eliminar "),e.k0s()()()()}if(2&n){const t=l.$implicit,r=e.XpG(2);e.R7$(2),e.SpI(" #",t.report_id," "),e.R7$(2),e.SpI(" ",r.getClientNameById(t.client_id)," "),e.R7$(2),e.Y8G("ngClass",e.ziG(11,y,"sensors"===t.data_type,"actuators"===t.data_type,"events"===t.data_type,!e.lJ4(10,j).includes(t.data_type))),e.R7$(1),e.SpI(" ",t.data_type," "),e.R7$(2),e.Y8G("ngClass",e.sMw(17,R,"json"===t.format,"csv"===t.format,!e.lJ4(16,w).includes(t.format))),e.R7$(1),e.SpI(" ",e.bMT(11,8,t.format)," "),e.R7$(3),e.SpI(" ",r.formatFileSize(t.size)," "),e.R7$(2),e.SpI(" ",r.formatDate(t.created_at)," ")}}function E(n,l){if(1&n&&(e.qSk(),e.joV(),e.j41(0,"div",53)(1,"div",54)(2,"h2",55),e.EFF(3,"Reportes Disponibles"),e.k0s(),e.j41(4,"p",56),e.EFF(5,"Lista de todos los reportes generados"),e.k0s()(),e.j41(6,"div",57)(7,"table",58)(8,"thead",59)(9,"tr")(10,"th",60),e.EFF(11,"ID"),e.k0s(),e.j41(12,"th",60),e.EFF(13,"Cliente"),e.k0s(),e.j41(14,"th",60),e.EFF(15,"Tipo"),e.k0s(),e.j41(16,"th",60),e.EFF(17,"Formato"),e.k0s(),e.j41(18,"th",60),e.EFF(19,"Tama\xf1o"),e.k0s(),e.j41(20,"th",60),e.EFF(21,"Creaci\xf3n"),e.k0s(),e.j41(22,"th",60),e.EFF(23,"Acciones"),e.k0s()()(),e.j41(24,"tbody",61),e.DNE(25,C,26,21,"tr",62),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(25),e.Y8G("ngForOf",t.reports)}}function D(n,l){if(1&n){const t=e.RV6();e.qSk(),e.joV(),e.j41(0,"div",75)(1,"div",76)(2,"div",77),e.qSk(),e.j41(3,"svg",78),e.nrm(4,"path",79),e.k0s()(),e.joV(),e.j41(5,"h2",80),e.EFF(6,"No hay reportes disponibles"),e.k0s(),e.j41(7,"p",81),e.EFF(8,"Genere un nuevo reporte o ajuste los filtros de b\xfasqueda para ver resultados"),e.k0s(),e.j41(9,"button",82),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openGenerateReportModal())}),e.qSk(),e.j41(10,"svg",35),e.nrm(11,"path",20),e.k0s(),e.EFF(12," Generar Nuevo Reporte "),e.k0s()()()}}function M(n,l){if(1&n&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.client_id),e.R7$(1),e.JRh(t.name)}}function T(n,l){if(1&n){const t=e.RV6();e.qSk(),e.joV(),e.j41(0,"div",83)(1,"div",84)(2,"div",85)(3,"h3",86),e.EFF(4,"Generar Nuevo Reporte"),e.k0s(),e.j41(5,"button",87),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeReportModal())}),e.qSk(),e.j41(6,"svg",88),e.nrm(7,"path",89),e.k0s()()(),e.joV(),e.j41(8,"div",90)(9,"div",91)(10,"div",25)(11,"label",92),e.EFF(12,"Cliente"),e.k0s(),e.j41(13,"select",93),e.bIt("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.selectedClient=o)}),e.DNE(14,M,2,2,"option",28),e.k0s()(),e.j41(15,"div",94)(16,"div",25)(17,"label",95),e.EFF(18,"Fecha Inicial"),e.k0s(),e.j41(19,"input",96),e.bIt("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.reportFormData.start_date=o)}),e.k0s()(),e.j41(20,"div",25)(21,"label",97),e.EFF(22,"Fecha Final"),e.k0s(),e.j41(23,"input",98),e.bIt("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.reportFormData.end_date=o)}),e.k0s()()(),e.j41(24,"div",25)(25,"label",99),e.EFF(26,"Tipo de Datos"),e.k0s(),e.j41(27,"select",100),e.bIt("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.reportFormData.data_type=o)}),e.j41(28,"option",101),e.EFF(29,"Sensores"),e.k0s(),e.j41(30,"option",102),e.EFF(31,"Eventos"),e.k0s(),e.j41(32,"option",103),e.EFF(33,"Actuadores"),e.k0s()()(),e.j41(34,"div",25)(35,"label",104),e.EFF(36,"Formato"),e.k0s(),e.j41(37,"select",105),e.bIt("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.reportFormData.format=o)}),e.j41(38,"option",106),e.EFF(39,"JSON"),e.k0s(),e.j41(40,"option",107),e.EFF(41,"CSV"),e.k0s()()()()(),e.j41(42,"div",108)(43,"button",109),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeReportModal())}),e.EFF(44," Cancelar "),e.k0s(),e.j41(45,"button",110),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.generateReport())}),e.EFF(46," Generar Reporte "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(13),e.Y8G("ngModel",t.selectedClient),e.R7$(1),e.Y8G("ngForOf",t.clients),e.R7$(5),e.Y8G("ngModel",t.reportFormData.start_date),e.R7$(4),e.Y8G("ngModel",t.reportFormData.end_date),e.R7$(4),e.Y8G("ngModel",t.reportFormData.data_type),e.R7$(10),e.Y8G("ngModel",t.reportFormData.format)}}function I(n,l){if(1&n&&(e.j41(0,"div",120)(1,"div",121)(2,"div")(3,"p",122),e.EFF(4,"ID:"),e.k0s(),e.j41(5,"p",123),e.EFF(6),e.k0s()(),e.j41(7,"div")(8,"p",122),e.EFF(9,"Cliente:"),e.k0s(),e.j41(10,"p",123),e.EFF(11),e.k0s()(),e.j41(12,"div")(13,"p",122),e.EFF(14,"Tipo:"),e.k0s(),e.j41(15,"p",123),e.EFF(16),e.k0s()(),e.j41(17,"div")(18,"p",122),e.EFF(19,"Tama\xf1o:"),e.k0s(),e.j41(20,"p",123),e.EFF(21),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(6),e.SpI("#",t.reportToDelete.report_id,""),e.R7$(5),e.JRh(t.getClientNameById(t.reportToDelete.client_id)),e.R7$(5),e.JRh(t.reportToDelete.data_type),e.R7$(5),e.JRh(t.formatFileSize(t.reportToDelete.size))}}function G(n,l){if(1&n){const t=e.RV6();e.qSk(),e.joV(),e.j41(0,"div",83)(1,"div",111)(2,"div",112)(3,"h3",86),e.EFF(4,"Confirmar Eliminaci\xf3n"),e.k0s(),e.j41(5,"button",87),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeDeleteModal())}),e.qSk(),e.j41(6,"svg",88),e.nrm(7,"path",89),e.k0s()()(),e.joV(),e.j41(8,"div",90)(9,"div",113)(10,"div",114),e.qSk(),e.j41(11,"svg",115),e.nrm(12,"path",116),e.k0s()(),e.joV(),e.j41(13,"div")(14,"h4",117),e.EFF(15,"\xbfDesea eliminar este reporte?"),e.k0s(),e.j41(16,"p",56),e.EFF(17,"Esta acci\xf3n no se puede deshacer"),e.k0s()()(),e.DNE(18,I,22,4,"div",118),e.k0s(),e.j41(19,"div",108)(20,"button",109),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeDeleteModal())}),e.EFF(21," Cancelar "),e.k0s(),e.j41(22,"button",119),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmDeleteReport())}),e.EFF(23," Eliminar Reporte "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(18),e.Y8G("ngIf",t.reportToDelete)}}let S=(()=>{class n{constructor(t,r){this.msadService=t,this.router=r,this.reports=[],this.isLoading=!1,this.error=null,this.downloadedData=[],this.showReportModal=!1,this.showDeleteModal=!1,this.reportToDelete=null,this.reportFormData={start_date:"",end_date:"",data_type:"sensors",format:"json"},this.selectedDataType="",this.selectedFormat="",this.selectedClient="",this.dataTypeOptions=[{value:"",label:"Todos los tipos"},{value:"sensors",label:"Sensores"},{value:"events",label:"Eventos"},{value:"actuators",label:"Actuadores"}],this.formatOptions=[{value:"",label:"Todos los formatos"},{value:"json",label:"JSON"},{value:"csv",label:"CSV"}],this.clients=[],this.STORAGE_KEY="currentClientId"}ngOnInit(){this.selectedClient=this.getCurrentClientId(),this.loadClients(),this.loadReports()}loadClients(){this.clients=[{client_id:"",name:"Todos los clientes"},{client_id:"mushroom1",name:"Mushroom 1"},{client_id:"mushroom2",name:"Mushroom 2"},{client_id:"mushroom123",name:"Mushroom 123"}]}loadReports(){this.isLoading=!0,this.error=null,this.selectedClient?this.msadService.getClientReports(this.selectedClient,this.selectedFormat,this.selectedDataType).subscribe({next:t=>{this.reports=t.reports||[],this.isLoading=!1},error:t=>{this.error="Error al cargar los reportes. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}}):this.msadService.getAllReports(this.selectedFormat,this.selectedDataType).subscribe({next:t=>{this.reports=t.reports||[],this.isLoading=!1},error:t=>{this.error="Error al cargar los reportes. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}})}applyFilters(){this.loadReports()}clearFilters(){this.selectedDataType="",this.selectedFormat="",this.selectedClient=this.getCurrentClientId(),this.loadReports()}viewReportDetails(t){this.router.navigate(["/information/reports",t.client_id,t.report_id])}downloadReport(t,r){r.stopPropagation();const o=t.download_url.split("/"),i=o[o.length-1],s=this.msadService.getReportDownloadUrl(t.client_id,i),g="json"===t.format?"application/json":"text/csv",c=document.createElement("a");c.style.display="none",document.body.appendChild(c),fetch(s).then(p=>{if(!p.ok)throw new Error("Error al descargar el archivo");return p.blob()}).then(p=>{const _=window.URL.createObjectURL(new Blob([p],{type:g}));c.href=_,c.download=i,c.click(),window.URL.revokeObjectURL(_)}).catch(p=>{console.error("Error downloading file:",p),this.error="Error al descargar el archivo. Aseg\xfarese de estar conectado al servidor (raspserver.local:5000)."}).finally(()=>{document.body.removeChild(c)})}deleteReport(t,r){r.stopPropagation(),this.reportToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.reportToDelete=null}confirmDeleteReport(){this.reportToDelete&&(this.isLoading=!0,this.msadService.deleteReport(this.reportToDelete.client_id,this.reportToDelete.report_id).subscribe({next:t=>{t.success?(this.loadReports(),this.closeDeleteModal()):(this.error=t.error||"Error desconocido al eliminar el reporte",this.isLoading=!1)},error:t=>{this.error="Error al eliminar el reporte. Por favor intente nuevamente.",this.isLoading=!1,console.error(t),this.closeDeleteModal()}}))}openGenerateReportModal(){const t=new Date,r=new Date;r.setDate(r.getDate()-1),this.reportFormData={start_date:this.formatDateForInput(r),end_date:this.formatDateForInput(t),data_type:"sensors",format:"json"},this.showReportModal=!0}closeReportModal(){this.showReportModal=!1}formatDateForInput(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}generateReport(){this.selectedClient?this.msadService.generateReport(this.selectedClient,this.reportFormData).subscribe({next:t=>{t.success?(this.closeReportModal(),this.loadReports()):this.error=t.error||"Error desconocido al generar el reporte"},error:t=>{this.error="Error al generar el reporte. Por favor intente nuevamente.",console.error(t)}}):this.error="Por favor seleccione un cliente para generar un reporte"}formatFileSize(t){if(0===t)return"0 Bytes";const i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(2))+" "+["Bytes","KB","MB","GB"][i]}formatDate(t){return new Date(t).toLocaleString()}getCurrentClientId(){return localStorage.getItem(this.STORAGE_KEY)||"mushroom1"}getCurrentClientName(){if(!this.selectedClient)return"";const t=this.clients.find(r=>r.client_id===this.selectedClient);return t?t.name:""}getClientNameById(t){const r=this.clients.find(o=>o.client_id===t);return r?r.name:t}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(f.$),e.rXU(h.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-reports"]],standalone:!0,features:[e.aNF],decls:65,vars:13,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-50","to-gray-100","p-4","md:p-6"],[1,"max-w-7xl","mx-auto"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","mb-8","gap-4"],[1,"text-2xl","font-bold","tracking-tight","text-gray-900","mb-1"],[1,"text-sm","text-gray-500"],[1,"bg-indigo-50","px-5","py-4","rounded-xl","shadow-sm","border","border-indigo-100","flex","items-center"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-indigo-600","mb-1"],[1,"text-lg","font-bold","text-indigo-700"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-8"],[1,"bg-white","rounded-xl","shadow-sm","overflow-hidden","border","border-gray-100"],[1,"p-5"],[1,"flex","items-center","mb-3"],[1,"flex-shrink-0","bg-indigo-100","p-2","rounded-lg"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","text-indigo-600"],["fill-rule","evenodd","d","M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule","evenodd"],[1,"text-lg","font-semibold","text-gray-900","ml-3"],[1,"text-sm","text-gray-500","mb-4"],[1,"w-full","px-4","py-2.5","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","transition-all","duration-200","flex","items-center","justify-center","gap-2","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"md:col-span-3"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-5","h-full"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-5"],[1,"space-y-2"],["for","clientSelect",1,"block","text-sm","font-medium","text-gray-700"],["id","clientSelect",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","dataTypeSelect",1,"block","text-sm","font-medium","text-gray-700"],["id","dataTypeSelect",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],["for","formatSelect",1,"block","text-sm","font-medium","text-gray-700"],["id","formatSelect",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],[1,"flex","items-center","space-x-3","mt-5","justify-end"],[1,"px-5","py-2.5","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","shadow-sm","transition-all","duration-200","font-medium","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V19a1 1 0 01-1 1H9a1 1 0 01-1-1v-7.586l-4.707-4.707A1 1 0 013 6V3z","clip-rule","evenodd"],[1,"px-5","py-2.5","bg-gray-100","hover:bg-gray-200","text-gray-700","rounded-lg","shadow-sm","transition-all","duration-200","font-medium","flex","items-center",3,"click"],["fill-rule","evenodd","d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule","evenodd"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 p-5 rounded-xl border border-red-100 text-red-700 mb-8 flex items-start gap-3",4,"ngIf"],["class","bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",4,"ngIf"],["class","bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center",4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",4,"ngIf"],[3,"value"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-r-2","border-indigo-600","mb-4"],[1,"ml-4","text-gray-700","font-medium"],[1,"bg-red-50","p-5","rounded-xl","border","border-red-100","text-red-700","mb-8","flex","items-start","gap-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mt-0.5","text-red-500","flex-shrink-0"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"font-medium"],[1,"text-sm","mt-1"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","overflow-hidden"],[1,"px-5","py-4","border-b","border-gray-100"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3.5","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-gray-50 cursor-pointer transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","cursor-pointer","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-indigo-600","group-hover:text-indigo-800",3,"click"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-700",3,"click"],[1,"px-6","py-4","whitespace-nowrap",3,"click"],[1,"px-2.5","py-1","text-xs","font-medium","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-3","py-1.5","border","border-transparent","rounded-lg","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","shadow-sm","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","mr-1.5"],["fill-rule","evenodd","d","M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"inline-flex","items-center","px-3","py-1.5","border","border-transparent","rounded-lg","text-sm","font-medium","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","shadow-sm","transition-all",3,"click"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-8","text-center"],[1,"max-w-md","mx-auto"],[1,"bg-indigo-100","mx-auto","h-20","w-20","rounded-full","flex","items-center","justify-center","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"px-6","py-2.5","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","shadow-sm","transition-all","duration-200","font-medium","inline-flex","items-center",3,"click"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-75","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-xl","shadow-xl","max-w-lg","w-full","mx-auto","overflow-hidden","animate-fade-in-up"],[1,"bg-indigo-600","px-6","py-4","flex","justify-between","items-center"],[1,"text-xl","font-semibold","text-white"],[1,"text-white/80","hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"space-y-5"],["for","reportClientSelect",1,"block","text-sm","font-medium","text-gray-700"],["id","reportClientSelect",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-2","gap-4"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","startDate",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],["for","endDate",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","endDate",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],["for","reportDataType",1,"block","text-sm","font-medium","text-gray-700"],["id","reportDataType",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],["value","sensors"],["value","events"],["value","actuators"],["for","reportFormat",1,"block","text-sm","font-medium","text-gray-700"],["id","reportFormat",1,"w-full","rounded-lg","border","border-gray-300","py-2.5","px-3","text-gray-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","shadow-sm",3,"ngModel","ngModelChange"],["value","json"],["value","csv"],[1,"bg-gray-50","px-6","py-4","border-t","border-gray-100","flex","justify-end","gap-3"],[1,"px-5","py-2.5","bg-white","hover:bg-gray-100","text-gray-700","rounded-lg","shadow-sm","transition-all","duration-200","font-medium","border","border-gray-200",3,"click"],[1,"px-5","py-2.5","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","shadow-sm","transition-all","duration-200","font-medium",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","max-w-md","w-full","mx-auto","overflow-hidden","animate-fade-in-up"],[1,"bg-red-600","px-6","py-4","flex","justify-between","items-center"],[1,"flex","items-center","mb-5"],[1,"bg-red-100","p-3","rounded-full","mr-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","text-red-600"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"text-lg","font-medium","text-gray-900"],["class","bg-gray-50 p-4 rounded-lg mb-5",4,"ngIf"],[1,"px-5","py-2.5","bg-red-600","hover:bg-red-700","text-white","rounded-lg","shadow-sm","transition-all","duration-200","font-medium",3,"click"],[1,"bg-gray-50","p-4","rounded-lg","mb-5"],[1,"grid","grid-cols-2","gap-2","text-sm"],[1,"text-gray-500"],[1,"font-medium","text-gray-900"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),e.EFF(5,"Reportes MSAD"),e.k0s(),e.j41(6,"p",4),e.EFF(7,"Visualice y descargue informes de datos para sus cultivos"),e.k0s()(),e.j41(8,"div",5)(9,"div",6)(10,"span",7),e.EFF(11,"Cultivo activo"),e.k0s(),e.j41(12,"span",8),e.EFF(13),e.k0s()()()(),e.j41(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13),e.qSk(),e.j41(19,"svg",14),e.nrm(20,"path",15),e.k0s()(),e.joV(),e.j41(21,"h2",16),e.EFF(22,"Nuevo Reporte"),e.k0s()(),e.j41(23,"p",17),e.EFF(24,"Cree un nuevo reporte con los datos y formato deseado"),e.k0s(),e.j41(25,"button",18),e.bIt("click",function(){return o.openGenerateReportModal()}),e.qSk(),e.j41(26,"svg",19),e.nrm(27,"path",20),e.k0s(),e.joV(),e.j41(28,"span"),e.EFF(29,"Generar Reporte"),e.k0s()()()(),e.j41(30,"div",21)(31,"div",22)(32,"h2",23),e.EFF(33,"Filtros de B\xfasqueda"),e.k0s(),e.j41(34,"div",24)(35,"div",25)(36,"label",26),e.EFF(37,"Cliente"),e.k0s(),e.j41(38,"select",27),e.bIt("ngModelChange",function(s){return o.selectedClient=s}),e.DNE(39,v,2,2,"option",28),e.k0s()(),e.j41(40,"div",25)(41,"label",29),e.EFF(42,"Tipo de Datos"),e.k0s(),e.j41(43,"select",30),e.bIt("ngModelChange",function(s){return o.selectedDataType=s}),e.DNE(44,x,2,2,"option",28),e.k0s()(),e.j41(45,"div",25)(46,"label",31),e.EFF(47,"Formato"),e.k0s(),e.j41(48,"select",32),e.bIt("ngModelChange",function(s){return o.selectedFormat=s}),e.DNE(49,b,2,2,"option",28),e.k0s()()(),e.j41(50,"div",33)(51,"button",34),e.bIt("click",function(){return o.applyFilters()}),e.qSk(),e.j41(52,"svg",35),e.nrm(53,"path",36),e.k0s(),e.EFF(54," Aplicar Filtros "),e.k0s(),e.joV(),e.j41(55,"button",37),e.bIt("click",function(){return o.clearFilters()}),e.qSk(),e.j41(56,"svg",35),e.nrm(57,"path",38),e.k0s(),e.EFF(58," Restablecer "),e.k0s()()()()(),e.DNE(59,F,4,0,"div",39),e.DNE(60,k,8,1,"div",40),e.DNE(61,E,26,1,"div",41),e.DNE(62,D,13,0,"div",42),e.k0s()(),e.DNE(63,T,47,6,"div",43),e.DNE(64,G,24,1,"div",43)),2&r&&(e.R7$(13),e.JRh(o.getCurrentClientName()||"Sin cultivo seleccionado"),e.R7$(25),e.Y8G("ngModel",o.selectedClient),e.R7$(1),e.Y8G("ngForOf",o.clients),e.R7$(4),e.Y8G("ngModel",o.selectedDataType),e.R7$(1),e.Y8G("ngForOf",o.dataTypeOptions),e.R7$(4),e.Y8G("ngModel",o.selectedFormat),e.R7$(1),e.Y8G("ngForOf",o.formatOptions),e.R7$(10),e.Y8G("ngIf",o.isLoading),e.R7$(1),e.Y8G("ngIf",o.error),e.R7$(1),e.Y8G("ngIf",!o.isLoading&&o.reports.length>0),e.R7$(1),e.Y8G("ngIf",!o.isLoading&&0===o.reports.length),e.R7$(1),e.Y8G("ngIf",o.showReportModal),e.R7$(1),e.Y8G("ngIf",o.showDeleteModal))},dependencies:[u.MD,u.YU,u.Sq,u.bT,u.Pc,a.YN,a.xH,a.y7,a.me,a.wz,a.BC,a.vS,a.X1],encapsulation:2})}}return n})()}}]);