"use strict";(self.webpackChunkmushroom_automation=self.webpackChunkmushroom_automation||[]).push([[539],{2539:(Y,g,l)=>{l.r(g),l.d(g,{DATABASE_ROUTES:()=>X});var k=l(7060),p=l(177),e=l(540);let v=(()=>{class o{constructor(){}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"container","mx-auto","px-4","py-6"]],template:function(r,s){1&r&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[p.MD,k.iI,k.n3],encapsulation:2})}}return o})();var u=l(9417),b=l(1626),h=l(8810),f=l(7673),d=l(9437),m=l(6354),_=l(5312);let x=(()=>{class o{constructor(t){this.http=t,this.baseUrl=`${_.c.apiUrl}/api`}getBackups(t){if(!t)return this.http.get(`${this.baseUrl}/msad/backups`).pipe((0,d.W)(s=>(console.error("Error al obtener backups:",s),(0,h.$)(()=>s))));let r=(new b.Nl).set("type",t);return this.http.get(`${this.baseUrl}/msad/backups`,{params:r}).pipe((0,m.T)(s=>{if(s.success&&s.backups){const n=t.toLowerCase();if(s.backups.length>0&&s.backups.some(i=>i.type&&i.type.toLowerCase()!==n)){const i=s.backups.filter(c=>c.type&&c.type.toLowerCase()===n);return console.log("Filtrando manualmente por tipo:",n),console.log("Backups originales:",s.backups.length),console.log("Backups filtrados:",i.length),{...s,backups:i}}}return s}),(0,d.W)(s=>(console.error("Error al obtener backups:",s),(0,h.$)(()=>s))))}createBackup(){return this.http.post(`${this.baseUrl}/msad/backups/create`,{}).pipe((0,d.W)(t=>(console.error("Error al crear backup:",t),(0,h.$)(()=>t))))}deleteBackup(t){return this.http.delete(`${this.baseUrl}/msad/backups/${t}`).pipe((0,d.W)(r=>(console.error("Error al eliminar backup:",r),(0,h.$)(()=>r))))}restoreBackup(t){return this.http.post(`${this.baseUrl}/msad/backups/restore/${t}`,{}).pipe((0,d.W)(r=>(console.error("Error al restaurar backup:",r),(0,h.$)(()=>r))))}getBackupDownloadUrl(t){return`${this.baseUrl}/msad/backups/download/${t}`}getSchedulerStatus(){return this.http.get(`${this.baseUrl}/msad/backups/scheduler`).pipe((0,m.T)(t=>t&&t.success&&typeof t.is_running<"u"?{success:t.success,status:{is_running:t.is_running,interval_hours:t.interval_hours,backup_count:t.backup_count,total_size:t.total_size,formatted_size:t.formatted_size,last_backup:t.last_backup,next_backup:t.next_backup,backup_dir:t.backup_dir},message:t.message}:t),(0,d.W)(t=>(console.error("Error al obtener estado del programador:",t),(0,f.of)({success:!1,error:"No se pudo obtener el estado del programador."}))))}configureScheduler(t){return this.http.post(`${this.baseUrl}/msad/backups/scheduler`,t).pipe((0,m.T)(r=>r&&r.success&&r.status&&typeof r.status.is_running<"u"?r:r&&r.success&&typeof r.is_running<"u"?{success:r.success,status:{is_running:r.is_running,interval_hours:r.interval_hours,backup_count:r.backup_count,total_size:r.total_size,formatted_size:r.formatted_size,last_backup:r.last_backup,next_backup:r.next_backup,backup_dir:r.backup_dir},message:r.message}:r),(0,d.W)(r=>(console.error("Error al configurar programador:",r),(0,f.of)({success:!1,error:"No se pudo configurar el programador."}))))}formatFileSize(t){if(0===t)return"0 Bytes";const n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(2))+" "+["Bytes","KB","MB","GB"][n]}formatDate(t){return new Date(t).toLocaleString()}static{this.\u0275fac=function(r){return new(r||o)(e.KVO(b.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function w(o,a){1&o&&(e.qSk(),e.j41(0,"svg",30),e.nrm(1,"circle",31),e.k0s())}function F(o,a){1&o&&(e.qSk(),e.j41(0,"svg",32),e.nrm(1,"circle",31),e.k0s())}function j(o,a){if(1&o&&(e.j41(0,"span",27),e.DNE(1,w,2,0,"svg",28),e.DNE(2,F,2,0,"svg",29),e.EFF(3),e.k0s()),2&o){const t=e.XpG();e.Y8G("ngClass",t.schedulerStatus.is_running?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),e.R7$(1),e.Y8G("ngIf",t.schedulerStatus.is_running),e.R7$(1),e.Y8G("ngIf",!t.schedulerStatus.is_running),e.R7$(1),e.SpI(" ",t.schedulerStatus.is_running?"Programador activo":"Programador detenido"," ")}}function y(o,a){if(1&o&&(e.j41(0,"div",33)(1,"span")(2,"b"),e.EFF(3,"Pr\xf3ximo backup:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"span")(6,"b"),e.EFF(7,"\xdaltimo backup:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"span")(10,"b"),e.EFF(11,"Cantidad:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"span")(14,"b"),e.EFF(15,"Total:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"span")(18,"b"),e.EFF(19,"Intervalo:"),e.k0s(),e.EFF(20),e.k0s()()),2&o){const t=e.XpG();let r,s;e.R7$(4),e.SpI(" ",t.schedulerStatus.next_backup?t.formatDate(t.schedulerStatus.next_backup):"N/A",""),e.R7$(4),e.SpI(" ",t.schedulerStatus.last_backup?t.formatDate(t.schedulerStatus.last_backup):"N/A",""),e.R7$(4),e.SpI(" ",null!==(r=t.schedulerStatus.backup_count)&&void 0!==r?r:"?",""),e.R7$(4),e.SpI(" ",null!==(s=t.schedulerStatus.formatted_size)&&void 0!==s?s:t.schedulerStatus.total_size?t.formatFileSize(t.schedulerStatus.total_size):"N/A",""),e.R7$(4),e.SpI(" cada ",t.schedulerStatus.interval_hours,"h")}}function B(o,a){if(1&o&&(e.qSk(),e.joV(),e.j41(0,"div",34)(1,"div",35)(2,"div",36),e.qSk(),e.j41(3,"svg",37),e.nrm(4,"path",38),e.k0s()(),e.joV(),e.j41(5,"div",39)(6,"p"),e.EFF(7),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(7),e.JRh(t.error)}}function E(o,a){if(1&o&&(e.qSk(),e.joV(),e.j41(0,"div",40)(1,"div",35)(2,"div",36),e.qSk(),e.j41(3,"svg",41),e.nrm(4,"path",42),e.k0s()(),e.joV(),e.j41(5,"div",39)(6,"p"),e.EFF(7),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(7),e.JRh(t.successMessage)}}function S(o,a){1&o&&(e.j41(0,"div",43),e.nrm(1,"div",44),e.k0s())}function C(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",45),e.qSk(),e.j41(1,"svg",46),e.nrm(2,"path",47),e.k0s(),e.joV(),e.j41(3,"p",48),e.EFF(4,"No se encontraron backups"),e.k0s(),e.j41(5,"button",49),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.createBackup())}),e.EFF(6," Crear primer backup "),e.k0s()()}}function M(o,a){1&o&&(e.j41(0,"span",72),e.qSk(),e.j41(1,"svg",73),e.nrm(2,"circle",31),e.k0s(),e.EFF(3," Manual "),e.k0s())}function R(o,a){1&o&&(e.j41(0,"span",74),e.qSk(),e.j41(1,"svg",75),e.nrm(2,"circle",31),e.k0s(),e.EFF(3," Programado "),e.k0s())}function I(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",53)(1,"div",54)(2,"div",55)(3,"h3",56),e.EFF(4),e.k0s(),e.DNE(5,M,4,0,"span",57),e.DNE(6,R,4,0,"span",58),e.k0s(),e.j41(7,"div",59),e.qSk(),e.j41(8,"svg",60),e.nrm(9,"path",61),e.k0s(),e.joV(),e.j41(10,"span"),e.EFF(11),e.k0s()(),e.j41(12,"div",62),e.qSk(),e.j41(13,"svg",60),e.nrm(14,"path",63),e.k0s(),e.joV(),e.j41(15,"span"),e.EFF(16),e.k0s()()(),e.j41(17,"div",64)(18,"button",65),e.bIt("click",function(s){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.downloadBackup(i,s))}),e.qSk(),e.j41(19,"svg",66),e.nrm(20,"path",67),e.k0s()(),e.joV(),e.j41(21,"button",68),e.bIt("click",function(s){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.openRestoreModal(i,s))}),e.qSk(),e.j41(22,"svg",66),e.nrm(23,"path",69),e.k0s()(),e.joV(),e.j41(24,"button",70),e.bIt("click",function(s){const i=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.openDeleteModal(i,s))}),e.qSk(),e.j41(25,"svg",66),e.nrm(26,"path",71),e.k0s()()()()}if(2&o){const t=a.$implicit,r=e.XpG(2);e.R7$(3),e.FS9("title",t.filename),e.R7$(1),e.JRh(t.filename),e.R7$(1),e.Y8G("ngIf",t.type&&"manual"===t.type.toLowerCase()),e.R7$(1),e.Y8G("ngIf",t.type&&("scheduled"===t.type.toLowerCase()||"auto"===t.type.toLowerCase())),e.R7$(5),e.JRh(r.formatDate(t.created_at)),e.R7$(5),e.JRh(r.formatFileSize(t.size))}}function T(o,a){if(1&o&&(e.j41(0,"div",50)(1,"div",51),e.DNE(2,I,27,6,"div",52),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.backups)}}function $(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",76)(1,"div",77)(2,"h3",78),e.EFF(3,"Confirmar eliminaci\xf3n"),e.k0s(),e.j41(4,"p",79),e.EFF(5,"\xbfEst\xe1 seguro que desea eliminar el backup "),e.j41(6,"span",80),e.EFF(7),e.k0s(),e.EFF(8,"?"),e.k0s(),e.j41(9,"div",81)(10,"button",82),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.closeDeleteModal())}),e.EFF(11," Cancelar "),e.k0s(),e.j41(12,"button",83),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.confirmDeleteBackup())}),e.EFF(13," Eliminar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.JRh(null==t.backupToDelete?null:t.backupToDelete.filename)}}function D(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",76)(1,"div",77)(2,"h3",78),e.EFF(3,"Confirmar restauraci\xf3n"),e.k0s(),e.j41(4,"p",84),e.EFF(5,"\xbfEst\xe1 seguro que desea restaurar la base de datos con el backup "),e.j41(6,"span",80),e.EFF(7),e.k0s(),e.EFF(8,"?"),e.k0s(),e.j41(9,"div",85)(10,"div",35)(11,"div",36),e.qSk(),e.j41(12,"svg",86),e.nrm(13,"path",87),e.k0s()(),e.joV(),e.j41(14,"div",39)(15,"p"),e.EFF(16,"Esta acci\xf3n reemplazar\xe1 todos los datos actuales con los del backup seleccionado. Este proceso no se puede deshacer."),e.k0s()()()(),e.j41(17,"div",81)(18,"button",82),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.closeRestoreModal())}),e.EFF(19," Cancelar "),e.k0s(),e.j41(20,"button",88),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.confirmRestoreBackup())}),e.EFF(21," Restaurar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.JRh(null==t.backupToRestore?null:t.backupToRestore.filename)}}function G(o,a){if(1&o&&(e.j41(0,"div",104)(1,"span",105),e.EFF(2,"\xdaltimo backup:"),e.k0s(),e.j41(3,"span",106),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(4),e.JRh(t.formatDate(t.schedulerStatus.last_backup))}}function V(o,a){if(1&o&&(e.j41(0,"div",104)(1,"span",105),e.EFF(2,"Pr\xf3ximo backup:"),e.k0s(),e.j41(3,"span",106),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(4),e.JRh(t.formatDate(t.schedulerStatus.next_backup))}}function N(o,a){if(1&o&&(e.j41(0,"div",102),e.DNE(1,G,5,1,"div",103),e.DNE(2,V,5,1,"div",103),e.k0s()),2&o){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.schedulerStatus.last_backup),e.R7$(1),e.Y8G("ngIf",t.schedulerStatus.next_backup)}}const L=function(o){return{"transform translate-x-7":o}};function z(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",76)(1,"div",77)(2,"h3",78),e.EFF(3,"Configurar programador de backups"),e.k0s(),e.j41(4,"div",79)(5,"label",89)(6,"div",90)(7,"input",91),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.schedulerEnabled=s)}),e.k0s(),e.nrm(8,"div",92)(9,"div",93),e.k0s(),e.j41(10,"div",94),e.EFF(11),e.k0s()()(),e.j41(12,"div",79)(13,"label",95),e.EFF(14,"Intervalo (horas)"),e.k0s(),e.j41(15,"div",96)(16,"input",97),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.schedulerInterval=s)}),e.k0s(),e.j41(17,"span",98),e.EFF(18),e.k0s()(),e.j41(19,"p",99),e.EFF(20),e.k0s()(),e.DNE(21,N,3,2,"div",100),e.j41(22,"div",81)(23,"button",82),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.closeSchedulerModal())}),e.EFF(24," Cancelar "),e.k0s(),e.j41(25,"button",101),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.saveSchedulerConfig())}),e.EFF(26," Guardar "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.Y8G("ngModel",t.schedulerEnabled),e.R7$(2),e.Y8G("ngClass",e.eq3(7,L,t.schedulerEnabled)),e.R7$(2),e.SpI(" ",t.schedulerEnabled?"Activado":"Desactivado"," "),e.R7$(5),e.Y8G("ngModel",t.schedulerInterval),e.R7$(2),e.JRh(t.schedulerInterval),e.R7$(2),e.SpI(" ",t.schedulerInterval<24?"Cada "+t.schedulerInterval+" hora(s)":24==t.schedulerInterval?"Diario":168==t.schedulerInterval?"Semanal":"Cada "+t.calculateDays(t.schedulerInterval)+" d\xeda(s)"," "),e.R7$(1),e.Y8G("ngIf",t.schedulerStatus)}}const X=[{path:"",component:v,children:[{path:"",redirectTo:"backups",pathMatch:"full"},{path:"backups",component:(()=>{class o{constructor(t){this.backupService=t,this.backups=[],this.isLoading=!1,this.error=null,this.successMessage=null,this.selectedType="",this.showDeleteModal=!1,this.backupToDelete=null,this.showRestoreModal=!1,this.backupToRestore=null,this.showSchedulerModal=!1,this.schedulerStatus=null,this.schedulerEnabled=!1,this.schedulerInterval=24}ngOnInit(){this.loadBackups(),this.loadSchedulerStatus()}loadBackups(){this.isLoading=!0,this.error=null,this.backupService.getBackups(this.selectedType).subscribe({next:t=>{this.backups=t.backups||[],console.log("Backups cargados:",this.backups),console.log("Filtro actual:",this.selectedType),this.isLoading=!1},error:t=>{this.error="Error al cargar los backups. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}})}loadSchedulerStatus(){this.backupService.getSchedulerStatus().subscribe({next:t=>{t.success&&t.status&&(this.schedulerStatus=t.status,this.schedulerEnabled=!!t.status.is_running,this.schedulerInterval=t.status.interval_hours)},error:t=>{console.error("Error al cargar el estado del programador:",t)}})}createBackup(){this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.createBackup().subscribe({next:t=>{t.success?(this.successMessage="Backup creado correctamente.",this.loadBackups(),this.loadSchedulerStatus()):(this.error=t.error||"Error desconocido al crear backup.",this.isLoading=!1)},error:t=>{this.error="Error al crear backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t)}})}downloadBackup(t,r){r.stopPropagation();const s=this.backupService.getBackupDownloadUrl(t.filename),n=document.createElement("a");n.style.display="none",n.href=s,n.download=t.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n)}openDeleteModal(t,r){r.stopPropagation(),this.backupToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.backupToDelete=null}confirmDeleteBackup(){this.backupToDelete&&(this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.deleteBackup(this.backupToDelete.filename).subscribe({next:t=>{t.success?(this.successMessage="Backup eliminado correctamente.",this.loadBackups(),this.closeDeleteModal()):(this.error=t.error||"Error desconocido al eliminar backup.",this.isLoading=!1)},error:t=>{this.error="Error al eliminar backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t),this.closeDeleteModal()}}))}openRestoreModal(t,r){r.stopPropagation(),this.backupToRestore=t,this.showRestoreModal=!0}closeRestoreModal(){this.showRestoreModal=!1,this.backupToRestore=null}confirmRestoreBackup(){this.backupToRestore&&(this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.restoreBackup(this.backupToRestore.filename).subscribe({next:t=>{t.success?(this.successMessage="Base de datos restaurada correctamente.",this.closeRestoreModal(),this.loadSchedulerStatus(),this.isLoading=!1):(this.error=t.error||"Error desconocido al restaurar backup.",this.isLoading=!1)},error:t=>{this.error="Error al restaurar backup. Por favor intente nuevamente.",this.isLoading=!1,console.error(t),this.closeRestoreModal()}}))}openSchedulerModal(){this.loadSchedulerStatus(),this.showSchedulerModal=!0}closeSchedulerModal(){this.showSchedulerModal=!1}saveSchedulerConfig(){this.isLoading=!0,this.error=null,this.successMessage=null,this.backupService.configureScheduler({enabled:this.schedulerEnabled,interval_hours:this.schedulerInterval}).subscribe({next:r=>{r.success?(this.successMessage="Programador configurado correctamente.",this.schedulerStatus=r.status||null,this.closeSchedulerModal(),this.loadSchedulerStatus(),this.isLoading=!1):(this.error=r.error||"Error desconocido al configurar programador.",this.isLoading=!1)},error:r=>{this.error="Error al configurar programador. Por favor intente nuevamente.",this.isLoading=!1,console.error(r)}})}filterByType(t){this.selectedType=t.toLowerCase(),this.loadBackups()}clearFilters(){this.selectedType="",this.loadBackups()}formatFileSize(t){return this.backupService.formatFileSize(t)}formatDate(t){return this.backupService.formatDate(t)}calculateDays(t){return Math.floor(t/24)}isTypeMatch(t){return!this.selectedType||t.type.toLowerCase()===this.selectedType.toLowerCase()}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(x))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-backups"]],standalone:!0,features:[e.aNF],decls:39,vars:23,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-6","gap-4"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-2"],["class","inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold",3,"ngClass",4,"ngIf"],[1,"text-gray-600","mt-1"],["class","mt-2 text-xs text-gray-500 flex flex-wrap gap-3",4,"ngIf"],[1,"flex","space-x-3","mt-4","md:mt-0"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","transform","hover:scale-105","flex","items-center","shadow-md","focus:outline-none","focus:ring-2","focus:ring-green-400",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","transform","hover:scale-105","flex","items-center","shadow-md","focus:outline-none","focus:ring-2","focus:ring-blue-400",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-lg shadow-md animate-fadeIn",4,"ngIf"],["class","bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded-lg shadow-md animate-fadeIn",4,"ngIf"],[1,"bg-white","p-4","rounded-lg","shadow-md","mb-6"],[1,"text-lg","font-semibold","mb-3"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-gray-200","transition-colors","shadow",3,"click"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-blue-200","transition-colors","shadow","flex","items-center",3,"click"],[1,"w-2","h-2","rounded-full","bg-blue-600","mr-2"],[1,"px-4","py-2","rounded-lg","text-sm","hover:bg-green-200","transition-colors","shadow","flex","items-center",3,"click"],[1,"w-2","h-2","rounded-full","bg-green-600","mr-2"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","py-20 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],["class","fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-semibold",3,"ngClass"],["class","h-4 w-4 mr-1 text-green-500","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","h-4 w-4 mr-1 text-red-500","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["fill","currentColor","viewBox","0 0 20 20",1,"h-4","w-4","mr-1","text-green-500"],["cx","10","cy","10","r","10"],["fill","currentColor","viewBox","0 0 20 20",1,"h-4","w-4","mr-1","text-red-500"],[1,"mt-2","text-xs","text-gray-500","flex","flex-wrap","gap-3"],[1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-6","rounded-lg","shadow-md","animate-fadeIn"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"bg-green-100","border-l-4","border-green-500","text-green-700","p-4","mb-6","rounded-lg","shadow-md","animate-fadeIn"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],[1,"py-20","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-16","w-16","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"mt-4","text-gray-600"],[1,"mt-4","px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","transform","hover:scale-105","shadow-md",3,"click"],[1,"p-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white border rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:scale-[1.02]",4,"ngFor","ngForOf"],[1,"bg-white","border","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-all","transform","hover:scale-[1.02]"],[1,"p-4","border-b","relative"],[1,"flex","items-center","gap-2","mb-1"],[1,"font-medium","text-gray-800","truncate",3,"title"],["class","inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200 shadow-sm","style","min-width: 64px;","title","Backup Manual",4,"ngIf"],["class","inline-flex items-center px-2 py-0.5 rounded-lg text-xs font-semibold bg-green-50 text-green-700 border border-green-200 shadow-sm","style","min-width: 80px;","title","Backup Programado",4,"ngIf"],[1,"mt-2","flex","items-center","text-sm","text-gray-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","items-center","text-sm","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"],[1,"p-4","flex","justify-between","items-center","bg-gray-50"],["title","Descargar backup",1,"text-blue-600","hover:text-blue-800","bg-blue-100","hover:bg-blue-200","p-2","rounded-lg","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],["title","Restaurar backup",1,"text-green-600","hover:text-green-800","bg-green-100","hover:bg-green-200","p-2","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Eliminar backup",1,"text-red-600","hover:text-red-800","bg-red-100","hover:bg-red-200","p-2","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["title","Backup Manual",1,"inline-flex","items-center","px-2","py-0.5","rounded-lg","text-xs","font-semibold","bg-blue-50","text-blue-700","border","border-blue-200","shadow-sm",2,"min-width","64px"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1","text-blue-400"],["title","Backup Programado",1,"inline-flex","items-center","px-2","py-0.5","rounded-lg","text-xs","font-semibold","bg-green-50","text-green-700","border","border-green-200","shadow-sm",2,"min-width","80px"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1","text-green-400"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-50","flex","items-center","justify-center","z-50","animate-fadeIn"],[1,"bg-white","rounded-lg","p-6","max-w-md","w-full","shadow-xl","transform","transition-all"],[1,"text-xl","font-bold","mb-4"],[1,"mb-6"],[1,"font-semibold"],[1,"flex","justify-end","space-x-3"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-100","transition-colors",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition-colors",3,"click"],[1,"mb-2"],[1,"bg-yellow-100","border-l-4","border-yellow-500","text-yellow-700","p-4","mb-6"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-yellow-500"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors",3,"click"],[1,"flex","items-center","cursor-pointer"],[1,"relative"],["type","checkbox",1,"sr-only",3,"ngModel","ngModelChange"],[1,"block","bg-gray-300","w-14","h-7","rounded-full"],[1,"dot","absolute","left-1","top-1","bg-white","w-5","h-5","rounded-full","transition-all","duration-300",3,"ngClass"],[1,"ml-3","text-gray-700","font-medium"],[1,"block","text-gray-700","font-medium","mb-2"],[1,"flex","items-center"],["type","range","min","1","max","168","step","1",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer",3,"ngModel","ngModelChange"],[1,"ml-3","text-gray-700","w-8","text-right"],[1,"text-sm","text-gray-500","mt-1"],["class","mb-6 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"mb-6","p-4","bg-gray-50","rounded-lg"],["class","mb-2 flex",4,"ngIf"],[1,"mb-2","flex"],[1,"font-medium","w-40"],[1,"text-gray-700"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4," Gesti\xf3n de Backups "),e.DNE(5,j,4,4,"span",3),e.k0s(),e.j41(6,"p",4),e.EFF(7,"Administre copias de seguridad de la base de datos"),e.k0s(),e.DNE(8,y,21,5,"div",5),e.k0s(),e.j41(9,"div",6)(10,"button",7),e.bIt("click",function(){return s.createBackup()}),e.qSk(),e.j41(11,"svg",8),e.nrm(12,"path",9),e.k0s(),e.EFF(13," Crear Backup "),e.k0s(),e.joV(),e.j41(14,"button",10),e.bIt("click",function(){return s.openSchedulerModal()}),e.qSk(),e.j41(15,"svg",8),e.nrm(16,"path",11),e.k0s(),e.EFF(17," Programador "),e.k0s()()(),e.DNE(18,B,8,1,"div",12),e.DNE(19,E,8,1,"div",13),e.joV(),e.j41(20,"div",14)(21,"h2",15),e.EFF(22,"Filtros"),e.k0s(),e.j41(23,"div",16)(24,"button",17),e.bIt("click",function(){return s.clearFilters()}),e.EFF(25," Todos "),e.k0s(),e.j41(26,"button",18),e.bIt("click",function(){return s.filterByType("manual")}),e.nrm(27,"span",19),e.EFF(28," Manual "),e.k0s(),e.j41(29,"button",20),e.bIt("click",function(){return s.filterByType("scheduled")}),e.nrm(30,"span",21),e.EFF(31," Programado "),e.k0s()()(),e.j41(32,"div",22),e.DNE(33,S,2,0,"div",23),e.DNE(34,C,7,0,"div",24),e.DNE(35,T,3,1,"div",25),e.k0s(),e.DNE(36,$,14,1,"div",26),e.DNE(37,D,22,1,"div",26),e.DNE(38,z,27,9,"div",26),e.k0s()),2&r&&(e.R7$(5),e.Y8G("ngIf",s.schedulerStatus),e.R7$(3),e.Y8G("ngIf",s.schedulerStatus),e.R7$(2),e.Y8G("disabled",s.isLoading),e.R7$(8),e.Y8G("ngIf",s.error),e.R7$(1),e.Y8G("ngIf",s.successMessage),e.R7$(5),e.AVh("bg-gray-200",""===s.selectedType)("bg-gray-100",""!==s.selectedType),e.R7$(2),e.AVh("bg-blue-200","manual"===s.selectedType)("bg-gray-100","manual"!==s.selectedType),e.R7$(3),e.AVh("bg-green-200","scheduled"===s.selectedType)("bg-gray-100","scheduled"!==s.selectedType),e.R7$(4),e.Y8G("ngIf",s.isLoading),e.R7$(1),e.Y8G("ngIf",!s.isLoading&&0===s.backups.length),e.R7$(1),e.Y8G("ngIf",!s.isLoading&&s.backups.length>0),e.R7$(1),e.Y8G("ngIf",s.showDeleteModal),e.R7$(1),e.Y8G("ngIf",s.showRestoreModal),e.R7$(1),e.Y8G("ngIf",s.showSchedulerModal))},dependencies:[p.MD,p.YU,p.Sq,p.bT,u.YN,u.me,u.MR,u.Zm,u.BC,u.vS,u.X1],styles:["@keyframes _ngcontent-%COMP%_fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  .animate-fadeIn[_ngcontent-%COMP%] {\n    animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in-out;\n  }"]})}}return o})(),title:"Gesti\xf3n de Backups"}]}]}}]);